{% extends "@EasyAdmin/layout.html.twig" %}
{% block head_metas %}
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}

        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
{% endblock %}

{% block body_class %}{% endblock %}
{% block content %}
<div class="container">
    <div class="flex justify-center mt-20 gap-10">
        <div class="stats bg-[#EB1A91] text-primary-content">
            <div class="stat">
                <div class="stat-title">Admin Dashboard</div>
                <div class="stat-value"><a href="/" class="text-primary">blossom</a></div>
            </div>
        </div>
        <div class="stats shadow-3xl stats-vertical md:stats-horizontal">
            <div class="stat">
                <div class="stat-figure text-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" class="inline-block w-8 h-8 fill-secondary"><path stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" d="m24 33.15 2.8-6.35 6.35-2.8-6.35-2.8-2.8-6.35-2.8 6.35-6.35 2.8 6.35 2.8ZM9.45 43.25q-1.95 0-3.325-1.375Q4.75 40.5 4.75 38.55V9.45q0-1.95 1.375-3.35Q7.5 4.7 9.45 4.7h29.1q1.95 0 3.35 1.4 1.4 1.4 1.4 3.35v29.1q0 1.95-1.4 3.325-1.4 1.375-3.35 1.375Zm0-4.7h29.1V9.45H9.45v29.1Zm0-29.1v29.1-29.1Z"/></svg>
                </div>
                <div class="stat-title">Publications</div>
                <div class="stat-value text-primary">{{ post_count }}</div>
            </div>
            
            <div class="stat">
                <div class="stat-figure text-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" class="inline-block w-8 h-8 fill-secondary"><path stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" d="M24 23.3q-3.85 0-6.3-2.45-2.45-2.45-2.45-6.3 0-3.85 2.45-6.3Q20.15 5.8 24 5.8q3.85 0 6.325 2.45t2.475 6.3q0 3.85-2.475 6.3Q27.85 23.3 24 23.3ZM6.75 41.9v-6.05q0-2.2 1.15-3.875 1.15-1.675 2.95-2.525 3.45-1.55 6.675-2.325Q20.75 26.35 24 26.35q3.3 0 6.5.8t6.6 2.3q1.9.8 3.05 2.475t1.15 3.925v6.05Zm4.7-4.7h25.1v-1.15q0-.75-.475-1.45T34.9 33.55q-3-1.4-5.525-1.925Q26.85 31.1 24 31.1q-2.8 0-5.425.525T13.05 33.55q-.7.35-1.15 1.05-.45.7-.45 1.45ZM24 18.6q1.75 0 2.9-1.15t1.15-2.9q0-1.8-1.15-2.925Q25.75 10.5 24 10.5t-2.9 1.125q-1.15 1.125-1.15 2.925 0 1.75 1.15 2.9T24 18.6Zm0-4.05Zm0 22.65Z"/></svg>
                </div>
                <div class="stat-title">Utilisateurs</div>
                <div class="stat-value text-primary">{{ user_count }}</div>
            </div>

            <div class="stat">
                <div class="stat-figure text-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48" class="inline-block w-8 h-8 fill-secondary"><path xmlns="http://www.w3.org/2000/svg" d="M10.8 23.1 24.05 1.7 37.3 23.1Zm25.55 23.2q-4.2 0-7.075-2.875T26.4 36.35q0-4.2 2.85-7.1 2.85-2.9 7.1-2.9 4.2 0 7.075 2.9t2.875 7.1q0 4.2-2.875 7.075T36.35 46.3ZM3.1 45.05V27.3h17.75v17.75Zm33.25-3.5q2.2 0 3.7-1.5t1.5-3.7q0-2.2-1.5-3.725t-3.7-1.525q-2.2 0-3.725 1.525T31.1 36.35q0 2.2 1.525 3.7t3.725 1.5ZM7.85 40.3h8.3v-8.25h-8.3ZM19.3 18.35h9.5l-4.75-7.75Zm4.75 0Zm-7.9 13.7Zm20.2 4.3Z"/></svg>
                </div>
                <div class="stat-title">Catégories</div>
                <div class="stat-value text-primary">{{ active_category_count }}</div>
                <div class="stat-desc">actives</div>
            </div>
        </div>
    </div>

    <div class="mt-5">
        <h2 class="my-10">Catégories avec le plus de médias</h2>
        
        {% for category in media_by_category %}

            <div class="indicator mb-12 mr-12">
                <span class="indicator-item badge capitalize"> {{ category.label }}</span> 
                <div class="stats  hover:shadow-3xl hover:scale-110 transition ease-in-out">
                    <div class="stat">
                        <div class="stat-title">{{ category.name }}</div>
                        <div class="stat-value">{{ category.media_count }}<span class="text-sm text-secondary"> post(s)</span></div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

        <div class="mt-5">
        <h2 class="my-10">Utilisateurs les plus actifs</h2>
        
        {% for user in media_by_user %}

            <div class="indicator mb-12 mr-12">
                <div class="stats  hover:shadow-3xl hover:scale-110 transition ease-in-out">
                    <div class="stat">
                        <div class="stat-title">{{ user.email }}</div>
                        <div class="stat-value">{{ user.media_count }}<span class="text-sm text-secondary"> post(s)</span></div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}